#!/bin/sh
status=

xmpp=
for x in `ls $HOME/.mcabber/*/state 2>/dev/null`
do
    xmpp="$xmpp `echo $x|sed 's/.*[/][.]mcabber[/]//;s/[/]state$//'`(`cat $x`)"
done
[ X"$xmpp"X == XX ] || status="$status unread messages: $xmpp"

mail=
for x in `ls $HOME/.mutt/*/state 2>/dev/null`
do
    mail="$mail `echo $x|sed 's/.*[/][.]mutt[/]//;s/[/]state$//'`(`cat $x`)"
done
[ X"$mail"X == XX ] || status="$status unread e-mails: $mail"

status="$status `date -R|sed 's/:[^:]*$//'`"

xsetroot -name "$status"

